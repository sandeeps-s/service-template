spring:
  application:
    name: service-template-test
  autoconfigure:
    # Enable DB auto-config in tests (override main profile setting)
    exclude: []
  datasource:
    url: jdbc:h2:mem:service_template_test;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driver-class-name: org.h2.Driver
  jpa:
    open-in-view: false
    hibernate:
      ddl-auto: create-drop
    properties:
      hibernate:
        dialect: org.hibernate.dialect.H2Dialect
  kafka:
    listener:
      # Prevent Kafka listeners from starting during tests unless explicitly enabled
      auto-startup: false

# Base URL for the external API used during tests.
# When WireMock is auto-configured, it exposes the dynamic port under the property `wiremock.server.port`.
# We reference that here so that tests can run without additional property overrides.
external:
  api:
    base-url: http://localhost:${wiremock.server.port}

# Reduce noise from actuator/health checks during tests (optional, safe defaults)
management:
  endpoints:
    web:
      exposure:
        include: "health,info"
  endpoint:
    health:
      show-details: never